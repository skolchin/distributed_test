# Distributed computing

Цель проекта - исследования технологий распределенных вычислений
с использованием платформы [Ray](https://docs.ray.io/en/latest/index.html)

## Требования

Python 3.12.10 (номер версии должен быть именно такой, если нет - нужно поменять)

## Установка

1. Для Windows: установить переменную окружения `RAY_ENABLE_WINDOWS_OR_OSX_CLUSTER` в значение 1

2. Создать виртуальное окружение и установить нужные пакеты:

Для Unix:

```bash
python3.10 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

Для Windows:

```powershell
python3.10 -m venv .venv
.\.venv\scripts\activate.ps1
pip install -r requirements.txt
```

## Запуск кластера

Кластер собирается при запуске головной ноды. 
Неизвестно будет ли это работать под Windows, поэтому скрипт написан только для Unix.
Впрочем, можно попробовать запустить его из-под WSL.

Запуск:

```bash
./start_cluster.sh <адрес кластера>
```

Адрес кластера может быть опущен, тогда кластер будет запущен локально.

Если же нужно обеспечить подключение через Интернет, то нужно указать адрес, доступный всем потенциальным нодам. 
Например, в моей конфигурации адрес кластера во внутренней сети будет `192.168.0.7`, а во внешней - `95.31.13.220`.

## Запуск ноды

Нода запускается следующей командой:

```bash
ray start --address='<адрес кластера>:6379' --node-manager-port 43403  --num-cpus 1 --verbose
```

Ключ `--address` нужно указывать только если подключение идет к внешнему кластеру.

Необходимо также убедиться что порты 43403 и 10001-19999 открыты на всех файрволах и доступны снаружи (список будет уточняться).

## Проверка

Проверка работоспособности кластера производится запуском скриптов test_xxx.py, например:

``` bash
python test_core.py <адрес кластера>:10001
```

Адрес кластера, как и везде, опционален - если он не указан, будет подключение к локальному кластеру

## Остановка

После завершения работы ноду и кластер следует остановить:

``` bash
ray stop
```
